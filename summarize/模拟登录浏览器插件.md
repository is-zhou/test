# 模拟登录浏览器插件

技术栈：Vue3 + JavaScript + Manifest V3 + WebExtension API + Vite

## 项目工程搭建

项目是基于 Vue3 、构建工具是基于 Vite

浏览器插件关键点是`manifest.json`配置文件

```json
{
  "name": "工作助手",

  "description": "工作助手",

  "version": "1.1.11",

  "manifest_version": 3,

  "icons": {
    "16": "icon16.png",
    "48": "icon48.png",
    "128": "icon128.png"
  },
  "permissions": [
    "activeTab",
    "clipboardWrite",
    "scripting",
    "declarativeNetRequest",
    "declarativeNetRequestWithHostAccess",
    "declarativeNetRequestFeedback",
    "storage",
    "debugger"
  ],
  "host_permissions": [
    "https://cdn.jjj.com/*",
    "https://api.gitee.com/enterprises/2071943/projects*",
    "https://jjj.jjj.com/api/lowcode/pro-name-list*",
    "https://jjj.jjj.com/api/gdekhback*"
  ],
  "action": {
    "default_popup": "index.html"
  },
  "devtools_page": "devtools.html",
  "content_scripts": [
    {
      "matches": [
        "https://e.gitee.com/..../code/repos/new?namespace_path=jiahuaming&name*"
      ],
      "js": ["createnamespace.js"]
    }
  ]
}
```

插件的 default_popup、devtools_page、options 配置的页面就需要进行`vite打包多入口配置`,`vite 打包分包`

```js
import { fileURLToPath, URL } from "node:url";
import path from "node:path";
import { defineConfig } from "vite";
import vue from "@vitejs/plugin-vue";
import components from "unplugin-vue-components/vite";
import autoImport from "unplugin-auto-import/vite";
import { VarletUIResolver } from "unplugin-vue-components/resolvers";
// https://vitejs.dev/config/
export default defineConfig({
  base: "./",
  plugins: [
    vue(),
    components({
      resolvers: [VarletUIResolver()],
    }),
    autoImport({
      resolvers: [VarletUIResolver({ autoImport: true })],
    }),
  ],
  resolve: {
    alias: {
      "@": fileURLToPath(new URL("./pages", import.meta.url)),
    },
  },
  build: {
    chunkSizeWarningLimit: 1500,
    rollupOptions: {
      input: {
        index: path.resolve(__dirname, "index.html"),
        devtools: path.resolve(__dirname, "devtools.html"),
      },
      output: {
        manualChunks(id) {
          if (id.includes("node_modules")) {
            return id
              .toString()
              .split("node_modules/")[1]
              .split("/")[0]
              .toString();
          }
        },
      },
    },
  },
});
```
